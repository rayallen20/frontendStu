# 10-综合案例-项目库页面效果

## 1. 需求

- 记录视频播放位置
- 电梯导航激活

## 2. 思路

### 2.1 记录视频播放位置

#### 2.1.1 记录位置

- 监听视频播放事件
  - `play`事件: 开始播放
  - `timeupdate`事件: 视频的播放位置发生变化(默认250ms触发一次)
- 记录视频播放位置
  - `videoDom.currentTime`(这个属性是可读写的,单位:s,但是精度是小数点后6位)
- 将这个位置写入到`LocalStorage`
- 由于播放是一个高频且持续的行为,所以需要节流,每秒钟记录一次即可
  - 因此记录的时间也以秒为单位即可

#### 2.1.2 读取位置

- 监听页面加载事件
- 从`LocalStorage`中读取位置
- 将位置设置给`videoDom.currentTime`

### 2.2 电梯导航激活

#### 2.2.1 滚动激活电梯导航

- 监听滚动事件
- 获取滚动的位置
  - `document.documentElement.scrollTop`
- 滚动距离超过元素距离顶部的距离时,激活对应的电梯导航
  - `offsetTop`: 元素距离顶部的距离
- 但是滚动事件是高频事件,所以需要节流,每500ms触发一次即可

#### 2.2.2 点击电梯导航滚动页面

- 监听点击事件
- 判断点击的是哪个电梯导航
- 滚动到对应元素即可
  - `document.documentElement.scrollTop = ele.offsetTop`