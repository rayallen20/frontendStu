# 18-作业-华为商城

## 1. 需求

- 顶部导航页面滑动大于80像素时候,会改为固定定位
- 点击顶部导航部分模块,页面会滑动到对应区域
- 点击顶部小模块,底部的黑色线条会滑动到对应区域
- 页面滑动到大模块对应区域,顶部的黑色线条也会滑动到部分区域

## 2. 实现

### 2.1 固定定位

- 这里定位改变后,由于脱标,导致元素的宽度会变小,所以需要在固定定位后,给元素设置宽度
  - `1520px`是我自己找的其他版心元素的宽度,设置给了这个导航栏

### 2.2 点击滑动区域与小模块

#### 2.2.1 点击滑动小模块

- 小模块初始的宽度是0,需要设置其宽度和li的宽度相同
- 设置小模块的`left`属性值为被点击的li的`offsetLeft`值
- 注意: 被点击的是`img`或者`span`,这里不太好找`li`,因为隔着的层数太多了
  - 找被点击的`img`或者`span`是第几个,事前准备好`img`和`span`的Array即可
- 但是事件委托是委托给ul的,所以要判断事件源是否为`img`或者`span`

#### 2.2.2 点击滑动区域

- 4个目标元素是`.js-scroll-magic`
- step1. 确认被点击的`A`或`IMG`是第几个
  - 这里就是代码中的`targetIndex`
- step2. `滚动距离 + 固定定位的头部高度 = .js-scroll-magic`的`offsetTop`

### 2.3 页面滑动到大模块对应区域,顶部的黑色线条也会滑动到部分区域

- step1. 确认4个`.js-scroll-magic`在垂直方向上的起始和结束位置
- step2. 检查当前页面滚动的距离,判断当前页面滚动的距离在哪个区间