# 16-电梯导航

## 1. 需求

- 点击不同的模块,页面可以自动跳转不同的位置
  - 小模块高亮
  - 页面滑动到对应大模块
- 页面滚动到大模块,电梯导航对应小模块会自动高亮
  - 移除原先的小模块高亮
  - 判断滑动大模块位置给小模块添加高亮

## 2. 实现

### 2.1 点击跳转

- step1. 找到所有要跳转到的目标元素,将其收集为一个Array
- step2. 事件委托给`.xtx-elevator-list`元素,监听点击事件
- step3. 获取点击的目标元素的索引,并根据索引找到对应的目标元素
  - 若点击的是li,直接在ul的子元素列表里寻找索引即可;
  - 若点击的是a,则需要找到a的父元素li,再在ul的子元素列表里寻找索引
- step4. 获取目标元素距离页面顶部的距离,并设置滚动条的滚动距离为目标元素距离页面顶部的距离即可
  - 这里设置滚动距离时,要减掉目标元素的高度,不然就滚过了

### 2.2 滚动高亮

- 遍历`panelHeaderCollection`
  - 判断当前滚动距离与当前遍历元素的offsetTop的关系
  - 找到当前滚动距离小于哪个元素的offsetTop,并将其索引保存
  - `索引 - 1`的元素高亮,其余元素取消高亮

## 3. 讲解

### 3.1 点击跳转

- 这里没有用到事件委托,因为后边的滚动高亮还得复用这个事件
- 要减去的不是目标元素的高度,而是导航栏的高度

### 3.2 滚动高亮

- 遍历`.big`
- 判断当前页面滚动的距离是否大于DOM的offsetTop
  - 这里由于有一个固定定位的导航栏,所以是`滚动距离 + 导航栏高度 >= DOM的offsetTop`
- 选取对应的a,高亮即可
  - 这里要注意清除前面高亮过的a